[agent]
  # Collection Interval (Must be > Script Duration)
  interval = "15s"
  round_interval = true
  
  # Flush to InfluxDB
  flush_interval = "15s"
  
  # Hostname override for easy Grafana filtering
  hostname = "rpi4-adsb"

# --- OUTPUT: CENTRAL BRAIN ---
[[outputs.influxdb]]
  urls = ["http://192.168.1.134:8086"]
  database = "readsb"
  timeout = "5s"

# --- INPUT: GPS SCRIPT ---
[[inputs.exec]]
  commands = ["/usr/local/bin/gpsd_telegraf.sh"]
  
  # STABILITY FIX: Timeout (10s) must be longer than script run time (5s)
  timeout = "10s"
  
  data_format = "json"
  name_override = "gps_data"
  
  [inputs.exec.tags]
    sensor_type = "u-blox_m8n"
    node_role = "sensor_node"
